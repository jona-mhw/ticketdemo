<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis de Cumplimiento Técnico - Proyecto Tickethome</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .table-header {
            background-color: #111827;
            color: #F9FAFB;
        }
        .compliance-chip {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .chip-cumple { background-color: #10B981; color: white; }
        .chip-parcial { background-color: #F59E0B; color: white; }
        .chip-brecha { background-color: #EF4444; color: white; }
        .chip-fuera-alcance { background-color: #6B7280; color: white; }
    </style>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-8">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-800">Análisis de Cumplimiento Técnico</h1>
            <p class="text-xl text-gray-600 mt-2">Proyecto Tickethome (Demo Funcional)</p>
        </header>

        <div class="bg-white shadow-lg rounded-lg overflow-hidden">
            <table class="min-w-full">
                <thead class="table-header">
                    <tr>
                        <th class="py-3 px-6 text-left">Directriz de Arquitectura</th>
                        <th class="py-3 px-6 text-left">Análisis del Proyecto "Tickethome" (Demo)</th>
                        <th class="py-3 px-6 text-left">Recomendación para Producción</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    <!-- Development -->
                    <tr class="bg-gray-200"><td colspan="3" class="py-2 px-4 font-bold text-lg">Desarrollo</td></tr>
                    <tr>
                        <td class="py-4 px-6">Arquitectura de Microservicios</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-brecha">Brecha</span>
                            <p class="mt-2">La aplicación es un monolito Flask. Aunque modular, no sigue una arquitectura de microservicios.</p>
                        </td>
                        <td class="py-4 px-6">Evaluar si la complejidad futura justifica una migración a microservicios. Para iniciar, se puede mantener como un monolito bien estructurado o separar servicios clave (ej. Notificaciones, Reportes) en funciones Cloud Functions/Lambda.</td>
                    </tr>
                    <tr>
                        <td class="py-4 px-6">Cloud Provider Principal</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-cumple">Cumple</span>
                            <p class="mt-2">El despliegue está diseñado y documentado para GCP (Google Cloud Run).</p>
                        </td>
                        <td class="py-4 px-6">Mantener GCP como proveedor principal para consistencia. Utilizar el CLI de `gcloud` y las APIs de Google para la automatización.</td>
                    </tr>
                    <tr>
                        <td class="py-4 px-6">Stack Tecnológico</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-cumple">Cumple</span>
                            <p class="mt-2">Python con Flask es uno de los frameworks recomendados en las directrices.</p>
                        </td>
                        <td class="py-4 px-6">Asegurar que la versión de Python utilizada sea una versión LTS (Long-Term Support) y gestionar las dependencias de forma estricta con `requirements.txt` y un `requirements.lock`.</td>
                    </tr>
                    <tr>
                        <td class="py-4 px-6">Base de Datos</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-brecha">Brecha</span>
                            <p class="mt-2">La demo usa SQLite. Las directrices especifican PostgreSQL o MySQL para entornos de nube.</p>
                        </td>
                        <td class="py-4 px-6">Migrar la base de datos a un servicio gestionado como Google Cloud SQL (PostgreSQL) para obtener escalabilidad, backups y seguridad gestionada.</td>
                    </tr>

                    <!-- Infraestructura -->
                    <tr class="bg-gray-200"><td colspan="3" class="py-2 px-4 font-bold text-lg">Infraestructura</td></tr>
                    <tr>
                        <td class="py-4 px-6">Infraestructura como Código (IaC)</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-brecha">Brecha</span>
                            <p class="mt-2">El despliegue es manual mediante un comando `gcloud`. No se utiliza Terraform.</p>
                        </td>
                        <td class="py-4 px-6">Implementar Terraform para definir toda la infraestructura (Cloud Run, Cloud SQL, Secret Manager, etc.) de forma declarativa. Esto es crítico para la reproducibilidad y gobernanza.</td>
                    </tr>

                    <!-- Seguridad -->
                    <tr class="bg-gray-200"><td colspan="3" class="py-2 px-4 font-bold text-lg">Seguridad</td></tr>
                    <tr>
                        <td class="py-4 px-6">Principio de Mínimo Privilegio</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-parcial">Parcial</span>
                            <p class="mt-2">El despliegue se realiza con una cuenta de usuario. No se especifica una cuenta de servicio dedicada.</p>
                        </td>
                        <td class="py-4 px-6">Crear una Cuenta de Servicio dedicada para el despliegue en CI/CD con los roles mínimos necesarios para desplegar en Cloud Run y conectar a la base de datos.</td>
                    </tr>
                    <tr>
                        <td class="py-4 px-6">Gestión de Secretos</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-brecha">Brecha</span>
                            <p class="mt-2">La `SECRET_KEY` tiene un valor por defecto inseguro y se carga desde variables de entorno (`.env`) que no deben usarse en producción.</p>
                        </td>
                        <td class="py-4 px-6">Utilizar Google Secret Manager para almacenar y gestionar de forma segura la `SECRET_KEY`, la cadena de conexión a la base de datos y cualquier otra credencial.</td>
                    </tr>
                    <tr>
                        <td class="py-4 px-6">Seguridad de Contraseñas</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-fuera-alcance">Fuera de Alcance (Demo)</span>
                            <p class="mt-2">Las contraseñas se guardan en texto plano. Esto se marcó explícitamente como fuera del alcance de la demo.</p>
                        </td>
                        <td class="py-4 px-6">Implementar hasheo y salting de contraseñas utilizando una librería robusta como `Werkzeug` (incluida en Flask) o `passlib` antes de pasar a producción.</td>
                    </tr>
                     <tr>
                        <td class="py-4 px-6">Exposición de Puertos y Redes</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-cumple">Cumple</span>
                            <p class="mt-2">Cloud Run gestiona la exposición de red y no expone puertos directamente. El flag `--allow-unauthenticated` es para la demo, pero se puede restringir.</p>
                        </td>
                        <td class="py-4 px-6">Configurar los "Controles de entrada" de Cloud Run a "Interno y balanceo de carga de Cloud" y colocar un Google Cloud Load Balancer al frente con IAP (Identity-Aware Proxy) para un control de acceso seguro.</td>
                    </tr>

                    <!-- CI/CD -->
                    <tr class="bg-gray-200"><td colspan="3" class="py-2 px-4 font-bold text-lg">CI/CD</td></tr>
                    <tr>
                        <td class="py-4 px-6">Pipeline Declarativo</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-brecha">Brecha</span>
                            <p class="mt-2">No existe un pipeline de CI/CD. El proceso es un script manual.</p>
                        </td>
                        <td class="py-4 px-6">Crear un pipeline de CI/CD utilizando Cloud Build. El pipeline debe automatizar los tests, el linting, la construcción de la imagen de Docker y el despliegue a Cloud Run de forma declarativa en un archivo `cloudbuild.yaml`.</td>
                    </tr>

                    <!-- Definition of Done -->
                    <tr class="bg-gray-200"><td colspan="3" class="py-2 px-4 font-bold text-lg">Definition of Done (DoD)</td></tr>
                    <tr>
                        <td class="py-4 px-6">Documentación en Repositorio</td>
                        <td class="py-4 px-6">
                            <span class="compliance-chip chip-parcial">Parcial</span>
                            <p class="mt-2">El proyecto tiene un `README.md`, `CHANGELOG.md` y `gemini.md`, pero carece de diagramas de arquitectura formales.</p>
                        </td>
                        <td class="py-4 px-6">Generar un diagrama de arquitectura de la solución en producción utilizando `Draw.io` o la herramienta de diagramación de Google Cloud y añadirlo al repositorio. Mejorar el `README.md` con instrucciones claras para el setup de producción.</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>Informe generado automáticamente por Asistente IA el 12 de agosto de 2025.</p>
        </footer>
    </div>
</body>
</html>